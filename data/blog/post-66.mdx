---
title: ä½¿ç”¨ Cursor ä» 0 åˆ° 1 å¼€å‘ä¸€ä¸ªå…¨æ ˆ chatbox é¡¹ç›®
date: 2025-05-23T01:44:45Z
slug: post-66
author: coderPerseusï¼šhttps://github.com/coderPerseus
tags: ["AI","å…¨æ ˆå¼€å‘"]
---

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ luckySnailï¼Œä½ è‚¯å®šç”¨è¿‡ AI èŠå¤©å·¥å…·ã€‚ä¾‹å¦‚ï¼š Geminiï¼ŒChatGPTï¼Œclaude AI ç­‰äº§å“ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒä»¬çš„ web ç½‘ç«™æˆ–è€…æ‰‹æœºåº”ç”¨æå‡ºé—®é¢˜ï¼Œå¾—åˆ°ç­”æ¡ˆã€‚åœ¨ä¹‹å‰å¦‚æœä½ æƒ³è¦æ„å»ºä¸€ä¸ªè¿™æ ·çš„ AI èŠå¤©åº”ç”¨ç¨‹åºï¼Œæ˜¯éœ€è¦å¤§é‡æ—¶é—´æ‰èƒ½å¼€å‘å‡ºæ¥ï¼Œä½†æ˜¯æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä½¿ç”¨ cursor + vercel çš„ Next.js å’Œ ai-sdk å¿«é€Ÿæ­å»ºå±äºä½ è‡ªå·±çš„ AI chat å·¥å…·ï¼Œé€šè¿‡è¿™ç¯‡æ–‡ç« ä½ å¯ä»¥çœ‹åˆ° AI å¼ºå¤§çš„è¾…åŠ©ç¼–ç¨‹èƒ½åŠ›å’Œ vercel å®¶è¶…èµçš„å·¥å…·ï¼åŒæ—¶ä¹Ÿèƒ½äº†è§£å¦‚ä½•ä½¿ç”¨ AI ä» 0 åˆ° 1 æ„å»ºä¸€ä¸ª web åº”ç”¨ï¼Œå…ˆçœ‹ä¸€ä¸‹æœ€ç»ˆçš„äº§å“ï¼š
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250523093123151.png)


å¦‚æœä½ æƒ³ç›´æ¥çœ‹æºç ï¼š https://github.com/coderPerseus/easyChat
æˆ‘è¿˜ä½¿ç”¨ deepwiki ç”Ÿæˆäº†å¯¹åº”çš„é¡¹ç›®æ–‡æ¡£ï¼š https://deepwiki.com/coderPerseus/easyChat
## ç¯å¢ƒå‡†å¤‡

åœ¨æ­£å¼å¼€å‘å‰ï¼Œä½ çš„è®¾å¤‡éœ€è¦æœ‰å¦‚ä¸‹ç¯å¢ƒï¼š
- Node >= 18.18ï¼Œpnpm ä½œä¸ºä¾èµ–ç®¡ç†å·¥å…·
- postgreSQL ï¼Œå¯ä»¥æ˜¯æœ¬åœ°æˆ–è€…åœ¨çº¿
- Curosr ï¼Œç”¨ä½œ AI è¾…åŠ©ç¼–ç¨‹
- chrome æ¸¸è§ˆå™¨ï¼Œå…¶ä»–æ¸¸è§ˆå™¨ä¹Ÿå¯

ä½ éœ€è¦å…·å¤‡çš„çŸ¥è¯†ï¼š
- å‰ç«¯åŸºç¡€
- æ•°æ®åº“åŸºç¡€
- è®¡ç®—æœºç½‘ç»œåŸºç¡€
- ç†Ÿæ‚‰ React å¼€å‘
å½“ç„¶ï¼Œä½ è¿˜éœ€è¦æœ‰è‰¯å¥½çš„è½¯ä»¶å¼€å‘ç´ å…»ï¼Œå¦åˆ™ä½ ä¼šå‘ç°å†™çš„ä»£ç ä¸å¥½ç»´æŠ¤ï¼Œæˆ–è€…ä¸æ˜“ç†è§£
## é¡¹ç›®åˆå§‹åŒ–

åœ¨çœŸæ­£å¼€å‘é¡¹ç›®ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè¿›è¡Œéœ€æ±‚åˆ†æ å’Œ æŠ€æœ¯é€‰å‹

### éœ€æ±‚åˆ†æ

- èŠå¤©é¡µé¢å¼€å‘ï¼ˆåŸºç¡€èƒ½åŠ›ï¼‰
	- åŒ…å«æç¤ºçš„è¾“å…¥æ¡†å’Œå‘é€ / åœæ­¢æŒ‰é’®
	- å®ç°ä¸€ä¸ªèŠå¤©åŒºåŸŸæ¥æ˜¾ç¤ºå¯¹è¯è®°å½•ï¼Œä¸€ä¸ªåˆ—è¡¨å±•ç¤ºä¼šè¯å†å²
	- å¼€å‘ /agent API æ¥å¤„ç†è¯·æ±‚
	- ç¡®ä¿æ¯ä¸ªå¯¹è¯çš„æ•°æ®éƒ½è¢«æŒä¹…å­˜å‚¨
	- é€šè¿‡æµå¼ä¼ è¾“è¿”å›æ‰€æœ‰ç»“æœ
- é«˜çº§èƒ½åŠ›
	- å¢å¼ºèŠå¤©ç»„ä»¶ï¼Œæ”¯æŒ markdown æ¸²æŸ“ã€è‡ªåŠ¨æ»šåŠ¨ã€å›¾ç‰‡ä¸Šä¼ ç­‰
	- å®ç°å‡½æ•°è°ƒç”¨ï¼Œä¾‹å¦‚æ£€ç´¢å½“å‰æ—¶é—´
### æŠ€æœ¯é€‰å‹

æ ¹æ®éœ€æ±‚ï¼Œæˆ‘é€‰æ‹©äº†æˆ‘å–œæ¬¢çš„å¹¶ä¸”ä¹Ÿæ˜¯ä¸»æµçš„æŠ€æœ¯ï¼š
- [Next.js](https://nextjs.org/) ä½œä¸ºå…¨æ ˆå¼€å‘åŸºç¡€æ¡†æ¶
- [hono.js](https://hono.dev/) ä½œä¸ºåç«¯æ¡†æ¶ï¼Œä¼˜åŒ–åœ¨ Next.js ä¸­åç«¯å¼€å‘ä½“éªŒ
- [PostgreSQL](https://www.postgresql.org/) ä½œä¸ºæ•°æ®åº“å­˜å‚¨å¯¹è¯è®°å½•
- [DrizzleORM](https://orm.drizzle.team/) ä½œä¸º ORM ï¼Œæ›´ä¸ºä¾¿æ·å’Œé«˜æ•ˆçš„æ–¹å¼ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’
- [shadcn/ui](https://ui.shadcn.com/) ä½œä¸º UI ç»„ä»¶åº“ï¼Œ[tailwindcss](https://tailwindcss.com/) ä½œä¸º css æ¡†æ¶
- [Vercel AI SDK](https://ai-sdk.dev/) å¿«é€Ÿå¼€å‘ AI ç›¸å…³çš„æœåŠ¡ï¼Œå¦‚æœä½ ä¹Ÿåœ¨å¼€å‘ AI ç›¸å…³çš„æœåŠ¡ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨å®ƒï¼Œèƒ½å¸®ä½ å‡å°‘ 80% çš„å·¥ä½œ
- [Biome](https://biomejs.dev/) è¿›è¡Œä»£ç æ ¼å¼åŒ–å’Œæ£€æµ‹ï¼ˆä»£æ›¿ ESLint + Prettierï¼‰ï¼Œéœ€è¦ä½ å®‰è£… Biome æ’ä»¶å“¦
- [zod](https://zod.dev/) ï¼š TypeScript ä¼˜å…ˆçš„æ•°æ®éªŒè¯åº“

å¯¹äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨ Github è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œç»´æŠ¤ä»£ç ã€‚ä½¿ç”¨ vercel è¿›è¡Œé¡¹ç›®éƒ¨ç½²ä¸Šçº¿ã€‚

### åˆå§‹åŒ–

ä¸‹é¢è¿›è¡Œåˆå§‹åŒ–é¡¹ç›®ï¼Œåˆå§‹åŒ–é¡¹ç›®å®Œæˆåï¼Œæˆ‘ä»¬åº”è¯¥å°±å¯ä»¥è¿›è¡Œä¸šåŠ¡å¼€å‘

1ï¼‰æ ¹æ® [Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs/app/getting-started/installation)æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Next.js é¡¹ç›®ï¼š

```bash
npx create-next-app@latest
```
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250521082158879.png)
2ï¼‰ä¸‹é¢ï¼Œæ ¹æ®[å®˜æ–¹æ–‡æ¡£](https://ui.shadcn.com/docs/installation/next)é›†æˆ shadcn/uiï¼š
```bash
pnpm dlx shadcn@latest init
pnpm dlx shadcn@latest add button
```

![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250521083511476.png)
ç„¶åå°è¯•ä½¿ç”¨ Button æŒ‰é’®ï¼Œå‘ç°é›†æˆæˆåŠŸï¼

>æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªå°ç»†èŠ‚å°±æ˜¯æˆ‘åœ¨å…¥å£çš„ layout ç»„ä»¶ä¸º body æ ‡ç­¾æ·»åŠ äº† suppressHydrationWarning ï¼Œä½œç”¨æ˜¯ï¼šæŠ‘åˆ¶ React åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ä¸åŒ¹é…æ—¶äº§ç”Ÿçš„è­¦å‘Šä¿¡æ¯ï¼Œè¿™åœ¨å¤„ç†åŠ¨æ€å†…å®¹ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ç­‰ï¼‰æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºè¿™äº›å†…å®¹åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯å¯èƒ½ä¼šæœ‰å·®å¼‚ã€‚

![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250521083725764.png)
3ï¼‰ä¸‹é¢é›†æˆ Biomeï¼Œä¿è¯ç›¸å…³ä»£ç é£æ ¼ä¸€è‡´
```bash
pnpm i @biomejs/biome -D
```
ç„¶ååœ¨ package.json æ·»åŠ å¯¹åº”çš„è„šæœ¬ï¼š
```json
{
	"scripts": {
		"lint": "next lint",
		"format": "biome format --write .",
		"lint:biome": "biome check --apply.",
	}
}
```
ä¸‹é¢è®¾ç½®ç¼–è¾‘å™¨çš„ Format Document With ï¼Œé€‰æ‹© Configure Default Formatter è®¾ç½®ä¸º Biomeã€‚ç°åœ¨ä½ çš„é¡¹ç›®å°±åˆäº†æ ¼å¼åŒ–èƒ½åŠ›ï¼Œä½ è¿˜å¯ä»¥åœ¨ git æäº¤çš„é“¾è·¯ä¸Šè¿›è¡Œé¢„å…ˆ format å’Œ lint ç­‰æ“ä½œï¼Œä¿è¯æäº¤çš„ä»£ç æ˜¯æ ¼å¼åŒ–çš„ã€‚
4ï¼‰ä¸‹é¢ç»§ç»­é›†æˆ hono.jsï¼Œæˆ‘å‚è€ƒäº†æ–‡ç« æ€è·¯ï¼š https://kuizuo.cn/blog/nextjs-with-hono/ ã€‚é¦–å…ˆæ ¹æ®å®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£…
```bash
pnpm i hono
# è®© hono æ¥ç®¡æ‰€æœ‰æ¥å£æœåŠ¡
mkdir -p "src/app/api/[[...route]]" && touch "src/app/api/[[...route]]/route.ts"
```
ä¸‹é¢ï¼Œå¼€å‘ route.ts å†…å®¹ï¼Œè®© hono æ¥æ¥ç®¡æ¥å£æœåŠ¡
```ts
// src/app/api/[[...route]]/route.ts
import api from "@/server/api";
import { handle } from "hono/vercel";
const handler = handle(api);
export {
  handler as GET,
  handler as POST,
  handler as PUT,
  handler as DELETE,
  handler as PATCH,
};
```
å› ä¸º Next.js ä¼šè‡ªåŠ¨æ‰«æ app ä¸‹çš„æ–‡ä»¶å¤¹è¿›è¡Œçƒ­æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æœåŠ¡ç«¯ä»£ç æ”¾åœ¨æ ¹ç›®å½•çš„ server æ–‡ä»¶å¤¹ä¸‹ï¼ˆå…¶å®ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•åç§°ï¼‰ï¼Œè¿™é‡Œå†™æˆ‘ä»¬æ‰€æœ‰çš„æœåŠ¡ç«¯é€»è¾‘å’Œæ¥å£ï¼Œä¸‹é¢åˆå§‹åŒ–ä¸€ä¸‹æœåŠ¡ç«¯çš„åŸºç¡€é€»è¾‘ï¼Œ
5ï¼‰åˆ›å»ºè‡ªå®šä¹‰æ ¡éªŒå™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯è¿›è¡Œè¯·æ±‚æ•°æ®éªŒè¯çš„å·¥å…·å‡½æ•°ï¼Œç¡®ä¿æ•°æ®ç¬¦åˆé¢„æœŸçš„æ ¼å¼å’Œç±»å‹è§„èŒƒï¼Œå¹¶æä¾›ç±»å‹å®‰å…¨çš„éªŒè¯ç»“æœ
```ts
// src/server/api/validator.ts
import type {
  Context,
  MiddlewareHandler,
  Env,
  ValidationTargets,
  TypedResponse,
  Input,
} from "hono";
import { validator } from "hono/validator";
import type { z, ZodSchema, ZodError } from "zod";

export type Hook<
  T,
  E extends Env,
  P extends string,
  Target extends keyof ValidationTargets = keyof ValidationTargets,
  // biome-ignore lint/complexity/noBannedTypes: <explanation>
  O = {}
> = (
  result: (
    | { success: true; data: T }
    | { success: false; error: ZodError; data: T }
  ) & {
    target: Target;
  },
  c: Context<E, P>
) =>
  | Response
  | void
  | TypedResponse<O>
  // biome-ignore lint/suspicious/noConfusingVoidType: <explanation>
  | Promise<Response | void | TypedResponse<O>>;

type HasUndefined<T> = undefined extends T ? true : false;

export const zValidator = <
  T extends ZodSchema,
  Target extends keyof ValidationTargets,
  E extends Env,
  P extends string,
  In = z.input<T>,
  Out = z.output<T>,
  I extends Input = {
    in: HasUndefined<In> extends true
      ? {
          [K in Target]?: K extends "json"
            ? In
            : HasUndefined<keyof ValidationTargets[K]> extends true
            ? { [K2 in keyof In]?: ValidationTargets[K][K2] }
            : { [K2 in keyof In]: ValidationTargets[K][K2] };
        }
      : {
          [K in Target]: K extends "json"
            ? In
            : HasUndefined<keyof ValidationTargets[K]> extends true
            ? { [K2 in keyof In]?: ValidationTargets[K][K2] }
            : { [K2 in keyof In]: ValidationTargets[K][K2] };
        };
    out: { [K in Target]: Out };
  },
  V extends I = I
>(
  target: Target,
  schema: T,
  hook?: Hook<z.infer<T>, E, P, Target>
): MiddlewareHandler<E, P, V> =>
  // @ts-expect-error not typed well
  validator(target, async (value, c) => {
    const result = await schema.safeParseAsync(value);

    if (hook) {
      const hookResult = await hook({ data: value, ...result, target }, c);
      if (hookResult) {
        if (hookResult instanceof Response) {
          return hookResult;
        }

        if ("response" in hookResult) {
          return hookResult.response;
        }
      }
    }

    if (!result.success) {
      throw result.error;
    }

    return result.data as z.infer<T>;
  });
```
6ï¼‰åˆ›å»ºé”™è¯¯å¤„ç†æ–‡ä»¶ï¼Œç»™åˆ°å®¢æˆ·ç«¯æ›´å¥½çš„é”™è¯¯æç¤ºï¼š
```ts
// src/server/api/error.ts
import { z } from "zod";
import type { Context } from "hono";
import { HTTPException } from "hono/http-exception";
import type { ContentfulStatusCode } from "hono/utils/http-status";

export class ApiError extends HTTPException {
  public readonly code?: ContentfulStatusCode;
  constructor({
    code,
    message,
  }: {
    code?: ContentfulStatusCode;
    message: string;
  }) {
    super(code, { message });
    this.code = code;
  }
}

export function handleError(err: Error, c: Context): Response {
  if (err instanceof z.ZodError) {
    const firstError = err.errors[0];

    return c.json(
      { code: 422, message: `\`${firstError.path}\`: ${firstError.message}` },
      422
    );
  }

  /**
   * This is a generic error, we should log it and return a 500
   */
  return c.json(
    {
      code: 500,
      message: "æœåŠ¡ç«¯é”™è¯¯, è¯·ç¨åå†è¯•ã€‚",
    },
    { status: 500 }
  );
}
```
ä¸‹é¢æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ¥å£ï¼ŒéªŒè¯ honojs æ˜¯å¦å¼•å…¥æˆåŠŸï¼š
```ts
// src/server/api/routes/hello.ts
import { Hono } from "hono";
const app = new Hono().get("/hello", (c) =>
  c.json({ message: "Hello, luckyChat" })
);
export default app;
```
7ï¼‰æœ€åï¼Œå¼€å‘å…¥å£æ–‡ä»¶ï¼š
```ts
// src/server/api/index.ts
import { handleError } from "./error";
import { Hono } from "hono";
import helloRoute from "./routes/hello";
const app = new Hono().basePath("/api");
app.onError(handleError);
const routes = app.route("/", helloRoute);
export default app;
export type AppType = typeof routes;
```
ç°åœ¨æˆ‘ä»¬ä¸ä»…æœ‰äº†æ¥å£ï¼Œè¿˜æœ‰äº†æœåŠ¡ç«¯æ¥å£çš„ç±»å‹å£°æ˜ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿çš„åœ¨å®¢æˆ·ç«¯è¿›è¡Œç±»å‹å®‰å…¨çš„æ¥å£è¯·æ±‚ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†™è·¯ç”±ï¼Œä¹Ÿä¸éœ€è¦å†™ç±»å‹ç›¸å…³çš„å†…å®¹ï¼ŒçœŸçš„æ˜¯ amazingï¼Œæˆ‘ä»¬èµ¶ç´§åœ¨å®¢æˆ·ç«¯è°ƒç”¨ç¬¬ä¸€ä¸ªæ¥å£å§ï¼åœ¨è°ƒç”¨æ¥å£å‰ï¼Œ
8ï¼‰æˆ‘ä»¬å…ˆå°è£…ä¸€ä¸ª fetch æ–¹æ³•ï¼š
```ts
// src/lib/fetch.ts
import type { AppType } from "@/server/api";
import { hc } from "hono/client";
import ky from "ky";

const baseUrl =
  process.env.NODE_ENV === "development"
    ? "http://localhost:3000"
    : process.env.NEXT_PUBLIC_APP_URL;

export const fetch = ky.extend({
  hooks: {
    afterResponse: [
      async (_, __, response: Response) => {
        if (response.ok) {
          return response;
          // biome-ignore lint/style/noUselessElse: <explanation>
        } else {
          throw await response.json();
        }
      },
    ],
  },
});

export const client = hc<AppType>(baseUrl as string, {
  fetch: fetch,
});
```
ky åº“æ˜¯ä¸€ä¸ªåŸºäºæµè§ˆå™¨åŸç”Ÿ Fetch API çš„è½»é‡çº§HTTPå®¢æˆ·ç«¯åº“ï¼Œæä¾›äº†æ›´ç®€æ´å‹å¥½çš„æ¥å£ï¼Œä½¿ç”¨å®ƒæ›´å¥½çš„ä¸ honojs é›†æˆï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ hc å’Œ AppType åˆ›å»ºäº†ä¸€ä¸ªå®‰å…¨çš„æ¥å£è¯·æ±‚æ–¹å¼ï¼š
```tsx
// src/app/page.tsx
import { Button } from "@/components/ui/button";
import { Heart } from "lucide-react";
import { client } from "@/lib/fetch";
async function getData() {
  try {
    const res = await client.api.hello.$get();
    if (!res.ok) {
      // This will activate the closest `error.js` Error Boundary
      throw new Error("Failed to fetch data");
    }
    return res.json();
  } catch (error) {
    console.error("è·å–æ•°æ®å¤±è´¥:", error);
    return { message: "AI åŠ©æ‰‹" };
  }
}
export default async function Home() {
  const { message } = await getData();
  return (
    <div>
	  <div>{message}</div>
      <Button>
        <Heart className="mr-2 h-4 w-4" /> lucky Snail
      </Button>
    </div>
  );
}
```
å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ client çš„æ—¶å€™å®ƒä¼šè¿›è¡Œä»£ç æç¤ºå‘Šè¯‰ä½ ç›®å‰å¯ä»¥ä½¿ç”¨å“ªäº›æ¥å£ï¼Œå¹¶ä¸”åœ¨åé¢æˆ‘ä»¬å¯ä»¥å€ŸåŠ© InferResponseType å’Œ typeof ç­‰ ts å…³é”®å­—æ¥ä½¿ç”¨æ¥å£å¯¹åº”çš„ ts ç±»å‹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æœåŠ¡ç«¯å®šä¹‰å¥½ç±»å‹å£°æ˜ï¼Œåœ¨å®¢æˆ·ç«¯ç›´æ¥æ¶ˆè´¹å³å¯ ğŸ‘ã€‚

9ï¼‰ä¸‹é¢è¿›è¡Œæœ€é‡è¦çš„ä¸€æ­¥ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“åˆå§‹åŒ–ï¼Œæœ‰å¼€å‘ç»éªŒçš„åº”è¯¥éƒ½çŸ¥é“æ•°æ®åº“è®¾è®¡çš„å¥½ï¼Œå¯ä»¥å¤§å¤§é™ä½ç³»ç»Ÿå¤æ‚åº¦ï¼Œå‡å°‘ä¸å¿…è¦çš„ä»£ç ï¼Œè¿™ä¹ˆé‡è¦çš„äº‹æƒ…è‚¯å®šæ˜¯éœ€è¦ AI çš„å‚ä¸çš„ï¼Œæˆ‘ä»¬æŠŠéœ€æ±‚ç»™åˆ° AIï¼Œç„¶åè®© AI å¸®å¿™è¿›è¡Œåˆæ­¥æ•°æ®åº“è®¾è®¡ï¼Œä¸‹é¢åœ¨ cursor ä¸­è¿›è¡Œ askï¼š
```text
æç¤ºè¯ï¼šç°åœ¨é›†æˆ DrizzleORM, and AI SDK.ä½¿ç”¨ postgreSQL ä½œä¸ºæ•°æ®åº“ï¼Œé©±åŠ¨ä½¿ç”¨ postgresï¼Œæ•°æ®åº“åå­—å« chatAI ï¼Œæ•°æ®åº“å°±ä¸€å¼ è¡¨ï¼Œå­˜å‚¨ AI å¯¹è¯è®°å½•ï¼Œè®¾è®¡è‰¯å¥½çš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œæœ€åå¼€å‘ /agent API æ¥å¤„ç†èŠå¤©è¯·æ±‚ï¼Œè¿™é‡Œä½¿ç”¨å¤§æ¨¡å‹ä¸º Deepseek ï¼Œå¤§æ¨¡å‹çš„ key å­˜åœ¨ ç¯å¢ƒå˜é‡çš„ DEEPSEEK_API_KEY ï¼Œæ•°æ®åº“é›†æˆå‚è€ƒ @https://orm.drizzle.team/docs/get-started-postgresql ï¼Œå…ˆæ¢³ç†éœ€æ±‚ï¼Œç„¶åä¸€æ­¥æ­¥è¿›è¡Œå®ç°
```
AI ç»™åˆ°çš„æ•°æ®åº“ç»“æ„å¦‚ä¸‹ï¼š
```ts
// src/lib/db/schema.ts
import { pgTable, serial, text, timestamp, varchar } from 'drizzle-orm/pg-core';

// èŠå¤©æ¶ˆæ¯ç±»å‹
export const chatMessages = pgTable('chat_messages', {
  id: serial('id').primaryKey(),
  sessionId: varchar('session_id', { length: 255 }).notNull(),
  role: varchar('role', { length: 50 }).notNull(), // 'user' æˆ– 'assistant'
  content: text('content').notNull(),
  createdAt: timestamp('created_at').defaultNow().notNull(),
});

// ä¼šè¯ä¿¡æ¯
export const chatSessions = pgTable('chat_sessions', {
  id: serial('id').primaryKey(),
  sessionId: varchar('session_id', { length: 255 }).unique().notNull(),
  title: varchar('title', { length: 255 }),
  createdAt: timestamp('created_at').defaultNow().notNull(),
  updatedAt: timestamp('updated_at').defaultNow().notNull(),
});
```
è¿™é‡Œ AI å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†æ•°æ®åº“çš„è¡¨ç»“æ„ï¼Œå®ƒèƒ½ç†è§£éœ€æ±‚ï¼Œå¹¶ç»™å‡ºåˆç†çš„æ•°æ®åº“è®¾è®¡ï¼š
- chat_sessions è¡¨ï¼šå­˜å‚¨èŠå¤©ä¼šè¯ä¿¡æ¯
- chat_messages è¡¨ï¼šå­˜å‚¨èŠå¤©æ¶ˆæ¯
è¿˜å¸®æˆ‘ä»¬åœ¨ package.json æ·»åŠ äº†ç”Ÿæˆå’Œè¿è¡Œè¿ç§»çš„è„šæœ¬ï¼Œæˆ‘ä»¬åœ¨ env é…ç½®åˆ° DATABASE_URLï¼Œæ‰§è¡Œè„šæœ¬å³å¯åˆå§‹åŒ–æ•°æ®åº“

ç°åœ¨æˆ‘ä»¬å®Œæˆäº†é¡¹ç›®åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ cursor æä¾›çš„ `/generate Cursor Rules`  æ¥ç”Ÿæˆé¡¹ç›®å¼€å‘æŒ‡å¯¼ï¼Œåœ¨åé¢ä¸šåŠ¡èƒ½åŠ›å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½æºå¸¦ä¸Šè¿™æ¡ rules ï¼Œå®ƒèƒ½å¸® AI æ›´å¥½çš„ç”Ÿæˆå†…å®¹
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250521133957767.png)

ç°åœ¨å·²ç»æ­å»ºå¥½äº†å‰ç«¯å’Œåç«¯åŸºç¡€èƒ½åŠ›ï¼Œå¹¶ä¸”ç”Ÿæˆäº†é¡¹ç›®å¼€å‘çš„ rules ï¼Œä¸‹é¢å°±å…¨éƒ¨äº¤ç»™ AI æ¥è¿›è¡Œä¸šåŠ¡å¼€å‘ï¼Œæˆ‘ä»¬åªéœ€è¦åšä¸€ä¸ªåˆæ ¼çš„æµ‹è¯•å’Œ code review å°±å¥½äº†ï¼

## æ ¸å¿ƒèƒ½åŠ›å¼€å‘

ä¸€ä¸ªèŠå¤©åº”ç”¨æœ€æ ¸å¿ƒçš„å°±æ˜¯è¾“å…¥æç¤ºè¯ => AI å¤§æ¨¡å‹å“åº”å†…å®¹ => å±•ç¤ºå†…å®¹ => ç»§ç»­å¯¹è¯

1ï¼‰å¼€å‘ chatï¼Œæç¤ºè¯å¦‚ä¸‹
>ä¸‹é¢ @project-structure.mdc å°±æ˜¯æˆ‘ä»¬ç”Ÿæˆçš„é¡¹ç›®å¼€å‘ rules
```text
@project-structure.mdc ä½¿ç”¨ ai-sdk å¼€å‘ /agent API æ¥å¤„ç†èŠå¤©è¯·æ±‚ï¼Œéµå¾ª RESTful API é£æ ¼ï¼Œè¿™é‡Œä½¿ç”¨å¤§æ¨¡å‹ä¸º Deepseek ï¼Œå¤§æ¨¡å‹çš„ key å­˜åœ¨ ç¯å¢ƒå˜é‡çš„ DEEPSEEK_API_KEY ï¼Œç„¶ååœ¨å¼€å‘å¯¹åº”çš„ chat é¡µé¢ï¼Œä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå³ä¾§æœ‰å‘é€å’Œæš‚åœæŒ‰é’®ï¼Œæ”¯æŒæ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œæ”¯æŒå‘é€å’Œåœæ­¢èƒ½åŠ›ï¼Œè¿™é‡Œä½¿ç”¨ @ai-sdk/react å¿«é€Ÿè¿›è¡Œå¼€å‘ï¼Œéœ€è¦æµå¼è¾“å‡º AI ç”Ÿæˆå†…å®¹ã€‚ä»£ç ç»„ä»¶åŒ–ï¼Œæ¨¡å—åŒ–ï¼Œå°½å¯èƒ½ä½¿ç”¨ shadui/cn ç»„ä»¶å¼€å‘ï¼Œå…ˆæ¢³ç†éœ€æ±‚ï¼Œç„¶åä¸€æ­¥æ­¥è¿›è¡Œå®ç°
```
AI å¯èƒ½éœ€è¦æ¯”è¾ƒæ¼«é•¿æ—¶é—´å®Œæˆå·¥ä½œï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸‹ä¸€ä¸ªæç¤ºè¯ï¼Œåœ¨ AI ç”Ÿæˆå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ£€æŸ¥å’Œä¿®å¤ bugï¼Œå½“ç„¶ä½ æ˜¯å¯ä»¥å€ŸåŠ© AI æ¥ fix errorã€‚è¿™é‡Œéœ€è¦é¢å¤–æ³¨æ„çš„æ˜¯å½“æˆ‘ä»¬ chat ä¸­æ–­çš„æ—¶å€™åº”è¯¥æŠŠå·²ç»ç”Ÿæˆçš„å†…å®¹è¿›è¡Œå­˜å‚¨æ•°æ®åº“

2ï¼‰å¼€å‘åˆ›å»ºæ–°ä¼šè¯èƒ½åŠ›ï¼Œæ”¯æŒä¼šè¯ç¼“å­˜åˆ°æœ¬åœ°
```text
@project-structure.mdc æ”¯æŒåˆ›å»ºæ–°ä¼šè¯ï¼Œå¹¶ä¸”ä¼šè¯ id å­˜å‚¨ localStorage ï¼Œåœ¨é¡µé¢åˆ·æ–°çš„æ—¶å€™ä¼šè¯ id ä¾ç„¶å­˜åœ¨ï¼Œæ³¨æ„ç‚¹å‡»åœæ­¢éœ€è¦æŠŠå½“å‰ä¼šè¯è¿›è¡Œå­˜å‚¨
```
3ï¼‰å¼€å‘å†å²ä¼šè¯åˆ—è¡¨å±•ç¤ºï¼Œæ”¯æŒåˆ‡æ¢ä¼šè¯
```text
@project-structure.mdc å¼€å‘å†å²å¯¹è¯è®°å½•åŠŸèƒ½ï¼Œå…ˆè¿›è¡Œæ¥å£å¼€å‘ï¼Œè¿™é‡Œä¸¤ä¸ªæ¥å£ï¼šè·å–æ‰€æœ‰ä¼šè¯åˆ—è¡¨å’Œè·å–æŒ‡å®š id çš„ä¼šè¯ä¿¡æ¯ï¼Œå‰ç«¯éœ€è¦å°†ä¼šè¯åˆ—è¡¨å°è£…ä¸ºå•ç‹¬ç»„ä»¶ï¼Œç‚¹å‡»ä¼šè¯åˆ—è¡¨é¡¹èƒ½è¿›å…¥è¯¥å¯¹è¯ï¼Œæ•°æ®æ¥å£é€»è¾‘ä½¿ç”¨è‡ªå®šä¹‰ hooksï¼Œä¿è¯ä»£ç æ¸…æ™°æ˜“ç†è§£ã€‚ æ³¨æ„å®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨å°è£…çš„ fetch å¯¼å‡ºçš„ client è¿›è¡Œæ¥å£è¯·æ±‚
```
4ï¼‰æ”¯æŒ markdown æ¸²æŸ“ AI ç”Ÿæˆçš„å†…å®¹ï¼Œä¼˜åŒ–é¡µé¢å¸ƒå±€ UIï¼Œæ”¯æŒå†…å®¹è‡ªåŠ¨æ»šåŠ¨åº•éƒ¨
ä¸Šé¢å®Œæˆåï¼Œæˆ‘ä»¬æœ‰äº†åŸºæœ¬çš„ chat åŠŸèƒ½é¡µé¢ï¼Œä½†æ˜¯å¯èƒ½è¿™æ—¶å€™é¡µé¢æ¯”è¾ƒä¸‘ä¸å¤ªç¾è§‚ï¼Œç°åœ¨è¿›è¡Œä¼˜åŒ–
```text
@project-structure.mdc ä½ æ˜¯èµ„æ·± UI è®¾è®¡å¸ˆï¼Œç°åœ¨è¿›è¡Œé¡¹ç›®ä¼˜åŒ–ï¼š
1ï¼Œå®ç° markdown æ¸²æŸ“æµå¼å†…å®¹ã€‚æ·»åŠ åœ¨å¯¹è¯ä¸­è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨çš„èƒ½åŠ›
2. ä¼˜åŒ–ç›®å‰çš„é¡µé¢ UIï¼Œé¡µé¢å¸ƒå±€ä¸ºå·¦è¾¹çš„ä¾§è¾¹æ ï¼Œå±•ç¤ºå†å²è®°å½•å’Œæ–°å¯¹è¯èƒ½åŠ›éƒ½æ”¾åœ¨å·¦è¾¹ï¼Œå½“å±å¹•å®½åº¦å°äº tailwindcss çš„ lg çš„æ—¶å€™å°±ä¸å±•ç¤ºä¾§è¾¹æ ï¼Œå³ä¾§å¯¹è¯æ¡† UI ï¼Œä¹Ÿéœ€è¦è¿›è¡Œä¼˜åŒ–ï¼Œæ³¨æ„ä¸è¦æ–°å¢å…ƒç´ å’Œä¿®æ”¹é€»è¾‘ï¼Œä»…ä»…æ˜¯å¯¹å…ƒç´ å¸ƒå±€å’Œ UIè¿›è¡Œä¼˜åŒ–ï¼Œå‚è€ƒä¼˜ç§€çš„ chatbox UI è®¾è®¡
```
5ï¼‰æ”¯æŒ function call èƒ½åŠ›ï¼Œè·å–å½“å‰æ—¶é—´
```text
@project-structure.mdc @web å‚è€ƒæ–‡æ¡£æ”¯æŒ function call èƒ½åŠ›ï¼Œä»¥è·å–æœ€æ–°æ—¶é—´ä¸ºä¾‹
```
## ä¼˜åŒ–

å¦‚æœä½ åšåˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ çš„é¡¹ç›®è‚¯å®šè¿˜æœ‰ä¸€äº› bug å’Œ UI ç»†èŠ‚éœ€è¦è¿›è¡Œä¼˜åŒ–ï¼Œä½ å¯ä»¥å’Œ AI ä¸€èµ·è¿›è¡Œä¼˜åŒ–ï¼Œç»™å¤§å®¶çœ‹ä¸€ä¸‹æˆ‘å’Œ AI  çš„ chat
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250522232908332.png)
ä¸æ–­çš„ä¿®å¤å’Œä¼˜åŒ–ï¼Œæœ€ç»ˆæˆ‘çš„ chatbox å°±å‡ºç°å•¦ï¼
![image.png](https://blog-1304565468.cos.ap-shanghai.myqcloud.com/jike/20250522232955471.png)
ä½ æ‰“å‡ åˆ†å‘¢ï¼Ÿ
## æ€»ç»“

1. AI ç›®å‰ç¼–ç¨‹èƒ½åŠ›å·²ç»è¶…è¿‡ 90% çš„å·¥ç¨‹å¸ˆäº†ï¼Œå®ƒåœ¨å¼€å‘åŠŸèƒ½å®‰å…¨æ€§å’Œå…¼å®¹æ€§è€ƒè™‘ä¸Šååˆ†çš„å…¨é¢ï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰èƒ½åŠ›è¾¹ç•Œï¼Œåœ¨é¢å¯¹å¤æ‚ç³»ç»Ÿï¼Œå¥‡æ€ªçš„éœ€æ±‚ä¸Šæ˜¯ä¸å¦‚äººçš„ã€‚æ‰€ä»¥ç¨‹åºå‘˜ä»¥åæ›´å¤šæ˜¯åšå†³ç­–ï¼Œåš AI ä¸éœ€æ±‚çš„æ¡¥æ¢ï¼Œé€šè¿‡æˆ‘ä»¬çš„ç»éªŒå’Œç›´è§‰å»é€‰æ‹©æ¥å—è¿˜æ˜¯æ‹’ç» AI çš„ç”Ÿæˆ
2. æ—¥å¸¸ AI ç¼–ç¨‹å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨æ–¹å¼ä¸º gemini åšè®¾è®¡å’Œæ–‡æ¡£ç±»å·¥ä½œï¼Œå†™ä»£ç éƒ¨åˆ†äº¤ç»™ claude
3. éœ€è¦æˆ‘ä»¬èƒ½å¤Ÿåˆç†çš„è¿›è¡Œæ¨¡å—æ‹†åˆ†ï¼Œèƒ½å¤Ÿè¯†åˆ« AI ä»£ç æ˜¯ä¸æ˜¯åˆç†çš„
4. ç³»ç»Ÿè®¾è®¡æ˜¯ AI æ—¶ä»£ç¨‹åºå‘˜çš„å¿…é¡»è¦æå‡çš„æŠ€èƒ½ï¼Œæ¨èä¸€æœ¬ä¹¦ã€Šè½¯ä»¶è®¾è®¡çš„å“²å­¦ã€‹ç¬¬äºŒç‰ˆ
5. çŸ¥è¯†å¹¿åº¦ï¼Œå…¨æ ˆèƒ½åŠ›å¯¹å‰ç«¯æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œå€ŸåŠ© AI å¿«é€Ÿå°†æƒ³æ³•å˜æˆç°å®æ˜¯ç¨‹åºå‘˜çš„çº¢åˆ©
6. æŒç»­å­¦ä¹ ï¼Œè·Ÿè¿›æœ€æ–°çš„ AI æ˜¯ä¿è¯è‡ªå·±æœ‰ç«äº‰åŠ›çš„å…³é”®
7. Vibe Coding å¿…ç„¶ä¼šæˆä¸ºæ–°çš„ç¼–ç æ–¹å¼ï¼Œçº¯æ‰‹å·¥ç¼–ç¨‹å¿…ç„¶ä¼šåƒ php ä¸€æ ·æˆä¸ºå†å²
8.  ç›®å‰æ¥çœ‹ï¼Œç¼–ç¨‹æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çœŸçš„å¾ˆæˆåŠŸï¼Œè®©æˆ‘è¿™ç§æ™®é€šäººèƒ½å¤Ÿå¿«é€Ÿ å¼€å‘å‡ºäº§å“ã€‚

 ## å‚è€ƒï¼š
1. https://claude.ai/chat/fd4c29a3-3b5c-4965-9670-4380dcc28f98
2. https://www.youtube.com/watch?v=tlrf4lu8Myc
https://bigbang.easykol.com/search/following?platform=TIKTOK&url=https://www.tiktok.com/@meditationbuddhism


---
æ­¤æ–‡è‡ªåŠ¨å‘å¸ƒäºï¼š<a href="https://github.com/coderPerseus/blog/issues/66" target="_blank">github issues</a>
